<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">

<dom-module id="lft-rules">
  <template>
    <style>
        :host {
            display: block;
        }
        paper-dialog{
            width: auto;
            height: auto;
        }
        iron-image {
            width: 750px;
            height: 750px;
        }
        li {
            padding: 4px;
        }
        paper-icon-button {
            padding: 0px;
            height: 18px;
            width: 18px;
        }
    </style>

    <iron-ajax
        id="modeLoader" auto
        url="http://localhost:5001/modes"
        last-response="{{modes}}"></iron-ajax>
    <template is="dom-repeat" items="[[modes]]">
        <paper-material elevation="1">
            <h1>[[item.name]]</h1>
            [[item.description]]
            <h3>Setup</h3>
            <ol>
                <template is="dom-repeat" items=[[item.setup]]>
                    <li>
                        [[item.text]]
                        <template is="dom-if" if="[[item.image]]">
                            <paper-icon-button icon="feedback" on-click="click" data-args$="[[item.image]]" />
                        </template>
                    </li>
                </template>
            </ol>
            <h3>Win conditions</h3>
            <ul>
                <template is="dom-repeat" items=[[item.conditions]]>
                    <li>
                        [[item.text]]
                        <template is="dom-if" if="[[item.image]]">
                            <paper-icon-button icon="feedback" on-click="click" data-args$="[[item.image]]" />
                        </template>
                    </li>
                </template>
            </ul>
            <h3>Rules</h3>
            <ol>
                <template is="dom-repeat" items=[[item.rules]]>
                    <li>
                        [[item.text]]
                        <template is="dom-if" if="[[item.image]]">
                            <paper-icon-button icon="feedback" on-click="click" data-args$="[[item.image]]" />
                        </template>
                    </li>
                </template>
            </ol>
        </paper-material>
    </template>
    <paper-dialog id="dialog">
        <iron-image id="image" src="http://localhost:5001/image/hideHUD.png" sizing="contain" ></iron-image>
    </paper-dialog>
  </template>


  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'lft-rules',

        properties: {
            modes: {
                type: Object,
                notifies: true
            }
        },

        click: function(event) {
            this.$.image.src = "http://localhost:5001/image/" + event.currentTarget.getAttribute("data-args");
            this.$.dialog.open();
        }
      });
    })();
  </script>
</dom-module>
